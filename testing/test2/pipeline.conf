
[name="pipeline" type="dpp::chain_module"]
  #logging.priority : string = "fatal"
  modules : string[2] =  \
    "MockCalibration" \
    "Cimrman"
    
[name="MockCalibration" type="dpp::chain_module"]
  #logging.priority : string = "debug"
  modules : string[2] = "CalibrateTracker" "CalibrateCalorimeters"

[name="CalibrateTracker" type="snemo::processing::mock_tracker_s2c_module"]
  #logging.priority : string = "debug"
  random.seed : integer = 12345
  store_mc_hit_id : boolean = true
  delayed_drift_time_threshold  : real as time = 13.0 microsecond

[name="CalibrateCalorimeters" type="snemo::processing::mock_calorimeter_s2c_module"]
  #logging.priority : string = "debug"
  Geo_label : string = "geometry"
  random.seed : integer = 12345
  store_mc_hit_id : boolean = true
  hit_categories : string[3]  = "calo" "xcalo" "gveto"
    calo.energy.resolution      : real as fraction = 8  %
    calo.alpha_quenching_parameters  : real[3] = 77.4 0.639 2.34
    calo.energy.low_threshold   : real as energy =  50 keV
    calo.energy.high_threshold  : real as energy = 150 keV
    calo.scintillator_relaxation_time  : real as time = 6.0 ns

    xcalo.energy.resolution     : real as fraction = 12 %
    xcalo.alpha_quenching_parameters : real[3] = 77.4 0.639 2.34
    xcalo.energy.low_threshold  : real as energy =  50 keV
    xcalo.energy.high_threshold : real as energy = 150 keV
    xcalo.scintillator_relaxation_time : real as time = 6.0 ns

    gveto.energy.resolution     : real as fraction = 15 %
    gveto.alpha_quenching_parameters : real[3] = 77.4 0.639 2.34
    gveto.energy.low_threshold  : real as energy =  50 keV
    gveto.energy.high_threshold : real as energy = 150 keV
    gveto.scintillator_relaxation_time : real as time = 6.0 ns

[name="Cimrman" type="Cimrman"]

  verbosity : string = "fatal"
  CD_label  : string = "CD"   # Input bank identifier
  TCD_label : string = "TCD"  # Output bank identifier (tracker clusters)
  TTD_label : string = "TTD"  # Output bank identifier (tracker trajectories)

  eventrec.verbosity : string = "fatal"
  eventrec.visualization_2D : boolean = false
  eventrec.visualization_3D : boolean = false
  eventrec.electron_mode : string = "polyline"
  eventrec.reconstruct_alphas : boolean = false
  eventrec.use_provided_preclustering : boolean = false
  eventrec.keep_only_best_solutions : boolean = true
  
  clustering.max_distance : real as length = 130.0 mm
  clustering.hit_association_distance : real as length = 6.0 mm

  clustering.sinograms.save_sinograms : boolean = false
  clustering.sinograms.iterations : integer = 2
  clustering.sinograms.zoom_factor : real = 10.0
  clustering.sinograms.resolution_phi : integer = 100
  clustering.sinograms.resolution_r : integer = 200  
  clustering.sinograms.uncertainty : real as length = 3.0 mm
  
  clustering.sinograms.max_initial_precision_r : real as length = 6.0 mm 
  
  polylines.max_vertical_distance : real as length = 40.0 mm
  polylines.min_tracker_hits_distance : real as length = 100.0 mm  
  polylines.max_kink_angle : real as angle = 120.0 deg
  polylines.min_distance_from_foil : real as length = 75.0 mm
  polylines.min_distance_from_main_walls : real as length = 50.0 mm
  polylines.min_distance_from_X_walls : real as length = 50.0 mm
  
  polylines.max_extention_distance : real as length = 120.0 mm

  polylines.max_trajectories_middlepoint_distance : real as length = 15.0 mm
  polylines.max_trajectory_endpoints_distance : real as length = 100.0 mm 
  polylines.max_trajectory_connection_angle : real as angle = 40.0 deg
  
# end
